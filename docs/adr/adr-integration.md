# [ADR.1.2] Выбор типа интеграционного взаимодействия
<!-- Название ADR состоит из [ADR.###] [Коротко суть принятого решения] -->

* Статус: Предложено
* Владелец: rgrefenshtein@mts.ru

## Контекст
<!-- Описание проблемы, требующей решения, причин, побудивших принять решение, ограничений, действовавших на момент принятия решения -->
Рассматривается вариант использования REST, gRPC или GraphQL в качестве основного типа интеграционного взаимодействия. Анализ будет производиться на основе оценочной матрицы, где в качестве критериев оценки возьмем следующее:

- Скорость работы
- Сквозная наблюдаемость
- Экспертиза в команде
- Время разработки
- Поддержка протоколов HTTP 1.1 и HTTP 2.0

Критерии оцениваются от 0 до 3 баллов, где 0 это неприменимо, а 3 полностью применимо

## Варианты решения
<!-- Описание рассмотренных вариантов c их плюсами и минусами -->

| Метрика                                   | REST                  | gRPC                    | GraphQL                 |
|:------------------------------------------|:----------------------|:------------------------|:------------------------|
| Скорость работы                           | В нашей системе не предполагается оперирование большим объемом данных - 2 | Высокая скорость работы за счет бинарного формата данных и использования HTTP 2.0 - 3| Проседание при сложных выборках - 1 |
| Сквозная наблюдаемость                    | формат данных JSON, трассировка - 3 | Двоичный формат данных, отсутствие трассировки - 1 | формат данных JSON, трассировка - 3 |
| Экспертиза в команде                      | Все разработчики имеют практический опыт - 3 | Часть команды не работала на практике - 2 | Только теоретические знания - 1 |
| Время разработки                          | Есть практический опыт работы - 3 | Более высокий порог вхождение, необходимо проводить обучение в команде - 1 | Более высокий порог вхождение, необходимо проводить обучение в команде - 1 |
| Поддержка протокола  HTTP 1.1 и HTTP 2.0  | Поддерживает - 3 | Только HTTP 2.0 - 0 | Поддерживает - 3 

## Решение

По результатам проведенной оценки получаем следующий итог:

REST - 14 баллов
GraphQL - 9 баллов
gRPC - 7 баллов

Это значит, что мы выбираем  REST в качестве основного типа интеграционного взаимодействия. 

## Последствия

Команда разработки имеет хорошую экспертизу в написании сервисов с поддержкой интеграций c REST и готова брать задачи на разработку по меру появления задач. Явных рисков на данный момент не выявлено